<!DOCTYPE html>
<html>

<head>
    <title>cleanSlate.js demo</title>
    <link rel="stylesheet" type="text/css" href="demo.css" />
    <script type="text/javascript" src="cleanSlate.js"></script>

    <script type="text/javascript">
        window.addEventListener('keyup', function(e) {
            if (String.fromCharCode(e.keyCode) === 'C') {
                Clean.slate();
            }
        });

        window.addEventListener('load', function() {
            var timeoutId         = 0,
                intervalId        = 0,
                setTimeoutButton  = document.getElementById('set-timeout-button'),
                setTimeoutValue   = document.getElementById('set-timeout-value'),
                setIntervalButton = document.getElementById('set-interval-button'),
                setIntervalValue  = document.getElementById('set-interval-value'),
                requestButton     = document.getElementById('request-button'),
                requestResult     = document.getElementById('request-result'),
                workerButton      = document.getElementById('worker-button'),
                workerInput       = document.getElementById('worker-input'),
                workerResult      = document.getElementById('worker-result');

            setTimeoutButton.addEventListener('click', function() {
                setTimeoutValue.textContent = 'Waiting...';

                ++timeoutId;
                setTimeout(function() {
                    setTimeoutValue.textContent = timeoutId;
                }, 1000);
            });

            setIntervalButton.addEventListener('click', function() {
                setInterval(function() {
                    setIntervalValue.textContent = ++intervalId;
                }, 250);
            });

            requestButton.addEventListener('click', function() {
                requestResult.value = 'Loading...';

                var request = new XMLHttpRequest();
                request.open('GET', 'cleanSlate.js?' + new Date().getTime());

                request.addEventListener('load', function() {
                    requestResult.value = request.responseText;
                });

                request.send();
            });

            workerButton.addEventListener('click', function() {
                workerResult.value = 'Working...';

                var worker = new Worker('demo.js');

                worker.addEventListener('message', function(e) {
                    workerResult.value = e.data;
                });

                worker.postMessage(workerInput.value);
            });
        });
    </script>
</head>

<body>
    <main>
        <h1>cleanSlate.js demo</h1>

        <p><strong>Hit <kbd>c</kbd> to clean the slate at any point.</strong></p>

        <p>
            Click <button id="set-timeout-button">here</button> to call <code>setTimeout</code> with
            a callback that will set the value at the bottom left.
        </p>

        <p>
            Click <button id="set-interval-button">here</button> to call <code>setInterval</code>
            with a callback that will continuously increment the counter at the bottom right.
        </p>

        <p>
            Click <button id="request-button">here</button> to send an <code>XMLHttpRequest</code>
            to fetch cleanSlate.js, which will go in the <code>&lt;textarea&gt;</code> below.
        </p>

        <textarea id="request-result"></textarea>

        <p>
            Click <button id="worker-button">here</button> to create a <code>Worker</code> and send
            it this message: <input type="text" id="worker-input" value="Hello, worker!" /><br />
            <br />
            The worker will respond after 1 second in the <code>&lt;textarea&gt;</code> below.
        </p>

        <textarea id="worker-result"></textarea>

        <footer>
            <div id="set-timeout-value"></div>
            <div id="set-interval-value"></div>
        </footer>
    </main>
</body>

</html>
